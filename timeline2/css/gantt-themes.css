/**
 * File: css/gantt-themes.css
 * Gantt Chart Theme Support
 * Styles for dark and light themes
 */

/* Theme Variables */
:root {
    /* Light Theme Colors (Default) */
    --theme-bg-color: #ffffff;
    --theme-text-color: #212529;
    --theme-border-color: #dee2e6;
    --theme-header-bg: #f8f9fa;
    --theme-row-hover: #f0f0f0;
    --theme-card-bg: #ffffff;
    --theme-card-border: #dee2e6;
    --theme-modal-bg: #ffffff;
    --theme-tooltip-bg: rgba(0, 0, 0, 0.8);
    --theme-tooltip-color: #ffffff;
    --theme-btn-default-bg: #f8f9fa;
    --theme-btn-default-text: #212529;
    --theme-btn-default-border: #dee2e6;
    --theme-marker-line-color: rgba(0, 0, 0, 0.1);
    --theme-success-bg: rgba(0, 255, 60, 0.5);
    --theme-danger-bg: rgba(255, 0, 22, 0.56);

    /* Status Colors - Light Theme */
    --status-not-started: #8bb9fe;
    --status-in-progress: #0d6efd;
    --status-completed: #0b5e37;  /* Darker green */
    --status-late: #a71d2a;  /* Darker red */
    --status-on-hold: #6c757d;

    /* Row status background colors */
    --row-green-status-bg: rgba(11, 94, 55, 0.4);
    --row-red-status-bg: rgba(167, 29, 42, 0.4);
    --striped-pattern: repeating-linear-gradient(45deg, rgba(167, 29, 42, 0.15), rgba(167, 29, 42, 0.15) 5px, transparent 5px, transparent 10px);
}

/* Dark Theme */
[data-theme="dark"] {
    /* Dark Theme Colors */
    --theme-bg-color: #212529;
    --theme-text-color: #f8f9fa;
    --theme-border-color: #495057;
    --theme-header-bg: #343a40;
    --theme-row-hover: #2c3034;
    --theme-card-bg: #343a40;
    --theme-card-border: #495057;
    --theme-modal-bg: #343a40;
    --theme-tooltip-bg: rgba(255, 255, 255, 0.8);
    --theme-tooltip-color: #212529;
    --theme-btn-default-bg: #343a40;
    --theme-btn-default-text: #f8f9fa;
    --theme-btn-default-border: #495057;
    --theme-marker-line-color: rgba(255, 255, 255, 0.1);
    --theme-success-bg: rgba(38, 255, 0, 0.91);
    --theme-danger-bg: rgba(251, 5, 31, 0.99);

    /* Status Colors - Dark Theme (slightly adjusted for better visibility) */
    --status-not-started: #90bfff;
    --status-in-progress: #3d8bfd;
    --status-completed: #0a7040;  /* Darker green for dark mode */
    --status-late: #b02a37;  /* Darker red for dark mode */
    --status-on-hold: #adb5bd;

    /* Row status background colors for dark theme */
    --row-green-status-bg: rgba(10, 112, 64, 0.4);
    --row-red-status-bg: rgba(176, 42, 55, 0.4);
    --striped-pattern: repeating-linear-gradient(45deg, rgba(176, 42, 55, 0.2), rgba(176, 42, 55, 0.2) 5px, transparent 5px, transparent 10px);
}

/* Apply theme colors to elements */

/* General Elements */
body {
    background-color: var(--theme-bg-color);
    color: var(--theme-text-color);
    transition: background-color 0.3s, color 0.3s;
}

.card {
    background-color: var(--theme-card-bg);
    border-color: var(--theme-card-border);
}

.card-header {
    background-color: var(--theme-header-bg);
    border-color: var(--theme-border-color);
}

.card-footer {
    background-color: var(--theme-header-bg);
    border-color: var(--theme-border-color);
}

.gantt-container {
    background-color: var(--theme-bg-color);
    border-color: var(--theme-border-color);
}

.gantt-timeline-header {
    background-color: var(--theme-header-bg);
    border-color: var(--theme-border-color);
}

.gantt-row {
    background-color: var(--theme-bg-color);
    border-color: var(--theme-border-color);
}

.gantt-row:hover,
.gantt-row.hovered {
    background-color: var(--theme-row-hover);
}

/* Timeline elements */
.timeline-week,
.timeline-month,
.timeline-quarter {
    border-color: var(--theme-border-color);
    color: var(--theme-text-color);
}

.timeline-day-marker {
    background-color: var(--theme-border-color);
}

.timeline-day-label {
    color: var(--theme-text-color);
}

/* Status indicators */
.gantt-labels.categorize-success {
    background-color: var(--theme-success-bg);
}

.gantt-labels.categorize-danger {
    background-color: var(--theme-danger-bg);
}

/* Project row status styling */
.project-row[data-status="green-status"] {
    background-color: var(--row-green-status-bg);
}

.project-row[data-status="red-status"] {
    background-color: var(--row-red-status-bg);
}

/* Striped pattern for incomplete items */
.gantt-labels[style*="repeating-linear-gradient"] {
    background-image: var(--striped-pattern) !important;
}

/* Progress indicators */
.progress-indicator.indicator-good {
    background-color: var(--status-completed);
    color: white;
}

.progress-indicator.indicator-warning {
    background-color: var(--status-late);
    color: white;
}

/* Make warning indicators more visible */
.date-conflict-warning.overdue {
    background-color: var(--status-late);
}

.date-conflict-warning.at-risk {
    background-color: var(--status-late);
    opacity: 0.8;
}

/* Status badge colors */
.status-badge.completed {
    background-color: var(--status-completed);
}

/* Filter buttons */
.gantt-filter-btn {
    background-color: var(--theme-btn-default-bg);
    border-color: var(--theme-btn-default-border);
    color: var(--theme-btn-default-text);
}

.gantt-filter-btn:hover {
    background-color: var(--theme-row-hover);
}

/* Modals */
.modal-content {
    background-color: var(--theme-modal-bg);
    border-color: var(--theme-border-color);
    color: var(--theme-text-color);
}

.modal-header, .modal-footer {
    border-color: var(--theme-border-color);
}

/* Loading Indicator */
.gantt-loading {
    color: var(--theme-text-color);
}

.gantt-loading-spinner {
    border-color: var(--theme-border-color);
    border-top-color: var(--status-in-progress);
}

/* Theme Switch Button */
.theme-switch {
    position: relative;
    display: inline-block;
    width: 40px;
    height: 24px;
    vertical-align: middle;
}

.theme-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.theme-switch-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 24px;
}

.theme-switch-slider:before {
    position: absolute;
    content: "";
    height: 16px;
    width: 16px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .theme-switch-slider {
    background-color: #2196F3;
}

input:checked + .theme-switch-slider:before {
    transform: translateX(16px);
}

/* Theme Icons */
.theme-icon-light,
.theme-icon-dark {
    font-size: 14px;
    margin-right: 6px;
    vertical-align: middle;
}

.theme-icon-light {
    color: #ffc107; /* Yellow/gold for sun */
}

.theme-icon-dark {
    color: #6c757d; /* Grey for moon */
}

/* Gantt Detail Panel Theme */
.detail-section h4 {
    border-color: var(--theme-border-color);
}

.detail-row {
    color: var(--theme-text-color);
}

.table {
    color: var(--theme-text-color);
}

.table-striped > tbody > tr:nth-of-type(odd) {
    background-color: var(--theme-row-hover);
}

/* Alert styles */
.alert-info {
    background-color: var(--theme-header-bg);
    border-color: var(--theme-border-color);
    color: var(--theme-text-color);
}

/* Chart-specific elements */
.gantt-labels {
    background-color: var(--theme-header-bg);
    border-color: var(--theme-border-color);
}

.gantt-pmname {
    color: var(--theme-text-color);
    opacity: 0.7;
}

.current-date-line {
    background-color: var(--status-in-progress);
}

.wp-bracket.wp-start,
.wp-bracket.wp-end {
    border-left-color: var(--theme-tooltip-bg); /* Semi-transparent purple */
}

/* Badge colors */
.badge.bg-secondary {
    background-color: var(--status-on-hold) !important;
}

/* Legend backgrounds */
.bg-light {
    background-color: var(--theme-header-bg) !important;
    color: var(--theme-text-color);
}

/* Border utility classes */
.border-bottom {
    border-bottom-color: var(--theme-border-color) !important;
}

/* Help content */
#ganttHelpContent {
    color: var(--theme-text-color);
}

#ganttHelpContent a {
    color: var(--status-in-progress);
}

/* Workpackage markers - adjust visibility based on theme */
[data-theme="dark"] .date-marker.workpackage-marker {
    opacity: 0.8; /* Make markers slightly more visible in dark mode */
}

/* Make text in bars more legible in dark mode */
[data-theme="dark"] .item-bar {
    text-shadow: 0px 0px 2px rgba(0, 0, 0, 0.7);
}

/* Progress indicators */
.progress {
    background-color: var(--theme-border-color);
}

/* Reactive striped patterns - adjust for dark theme */
[data-theme="dark"] .gantt-labels[style*="repeating-linear-gradient"] {
    background-image: repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.1) 5px, transparent 5px, transparent 10px) !important;
}